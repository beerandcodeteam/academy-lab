function r(){return new Promise((n,t)=>{if(typeof window<"u"&&window.PandaPlayer)return n(window.PandaPlayer);window.pandascripttag=window.pandascripttag||[];let o=Date.now(),e=setInterval(()=>{window.PandaPlayer?(clearInterval(e),n(window.PandaPlayer)):Date.now()-o>15e3&&(clearInterval(e),t(new Error("Panda API did not load in time")))},50)})}function i({elementId:n,activeLesson:t,options:o={}}){return{ready:!1,error:null,currentTime:0,isPlaying:!1,duration:null,_player:null,_elementId:n||"panda-video",activeLesson:t,async init(){console.log("iniciando"),await r(),console.log("terminando"),this.$nextTick(()=>{this.initPlayer()})},changeLesson(e){console.log("PLAYER BEFORE DELETE",this._player),this.destroy(),console.log("PLAYER AFTER DELETE",this._player),this.activeLesson=e,this.$wire.setLesson(e)},initPlayer(){console.log("tENTRA QUI");let e=new window.PandaPlayer(this._elementId,{onReady:()=>{e.onEvent(({message:a})=>{a==="panda_play"?this.activeLesson.user_lesson_status||this.$dispatch("start-lesson"):a==="panda_ended"&&(this.$wire.dispatch("complete-lesson"),this.$dispatch("start-count-down"))})},onError:a=>{console.log("Player onError",a),window.location.reload()},...o});this._player=e,console.log("O PLAYER AQUIY",this._player)},destroy(){try{this._player?.destroy?.()}catch{}this._player=null}}}window.pandaPlayer=i;export{i as default};
